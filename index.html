<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emoji Spelling Adventure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff6b81;
            --primary-hover: #ff4757;
            --secondary-color: #70a1ff;
            --background-gradient: linear-gradient(120deg, #f8d5a3 0%, #f5a6b7 100%);
            --container-bg: rgba(255, 255, 255, 0.95);
            --text-color: #574b90;
            --light-text: #7f8c8d;
            --success-color: #2ed573;
            --error-color: #ff4757;
        }

        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: 'Comic Neue', cursive;
            background: var(--background-gradient);
            min-height: 100vh;
            margin: 0;
            padding: 10px;
            overflow-x: hidden;
            color: var(--text-color);
        }

        #game-container {
            text-align: center;
            background: var(--container-bg);
            padding: 25px 30px;
            border-radius: 24px;
            box-shadow: 0 12px 45px rgba(0, 0, 0, 0.15);
            width: 90%;
            max-width: 650px;
            position: relative;
            overflow: hidden;
            border: 2px solid white;
        }
        
        h1 {
            font-family: 'Fredoka One', cursive;
            font-size: clamp(24px, 6vw, 36px);
            margin-bottom: 10px;
            color: var(--primary-color);
            text-shadow: 2px 2px 0px rgba(255,255,255,0.7);
        }

        p {
            font-size: clamp(16px, 4vw, 18px);
            line-height: 1.6;
            margin-top: 0;
            font-weight: 700;
        }
        
        .instruction-vi {
            font-size: clamp(14px, 3.5vw, 16px);
            color: var(--light-text);
            margin-top: 4px;
            display: block;
        }

        input[type="text"] {
            padding: 14px 20px;
            font-size: clamp(16px, 4vw, 18px);
            width: 100%;
            max-width: 450px;
            margin: 15px 0;
            box-sizing: border-box;
            font-family: 'Comic Neue', cursive;
            font-weight: 700;
            border: 3px solid #dfe6e9;
            border-radius: 30px;
            transition: border-color 0.3s, box-shadow 0.3s;
            text-align: center;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 10px rgba(112, 161, 255, 0.3);
        }

        .button-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            margin-top: 10px;
        }

        button {
            padding: 12px 25px;
            font-size: clamp(15px, 4vw, 17px);
            cursor: pointer;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 20px;
            touch-action: manipulation;
            font-family: 'Fredoka One', cursive;
            transition: background-color 0.3s, transform 0.2s;
            border-bottom: 4px solid #c0392b;
        }

        button:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
        }
        
        button:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        #hint {
            color: var(--light-text);
            margin-top: 15px;
            font-size: clamp(14px, 4vw, 18px);
            user-select: none;
            line-height: 1.5;
            min-height: 25px;
            font-weight: 700;
        }

        #completion, #result {
            font-size: clamp(16px, 4vw, 19px);
            font-weight: 700;
            margin-top: 15px;
            min-height: 28px;
        }
        
        #result.correct { color: var(--success-color); }
        #result.incorrect { color: var(--error-color); }

        .emoji-particle {
            position: absolute;
            pointer-events: none;
            z-index: 10;
            font-size: 28px;
            opacity: 0;
            animation: emoji-fly 1.2s ease-out forwards;
        }

        @keyframes emoji-fly {
            0% {
                transform: translate(0, 0) scale(0.5);
                opacity: 1;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(1.5) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>Emoji Spelling Adventure</h1>
        <p>Click Start to begin the game!<span class="instruction-vi">Nháº¥n Báº¯t Ä‘áº§u Ä‘á»ƒ chÆ¡i!</span></p>
        <button onclick="startGame()">Start</button>
    </div>

    <script>
        const sentences = [
            { english: "This is an alligator.", vietnamese: "ÄÃ¢y lÃ  con cÃ¡ sáº¥u", emoji: "ğŸŠ" },
            { english: "This is an ant.", vietnamese: "ÄÃ¢y lÃ  con kiáº¿n", emoji: "ğŸœ" },
            { english: "This is an apple.", vietnamese: "ÄÃ¢y lÃ  quáº£ tÃ¡o", emoji: "ğŸ" },
            { english: "This is a ball.", vietnamese: "ÄÃ¢y lÃ  quáº£ bÃ³ng", emoji: "âš½" },
            { english: "This is a banana.", vietnamese: "ÄÃ¢y lÃ  quáº£ chuá»‘i", emoji: "ğŸŒ" },
            { english: "This is a bear.", vietnamese: "ÄÃ¢y lÃ  con gáº¥u", emoji: "ğŸ»" },
            { english: "This is a car.", vietnamese: "ÄÃ¢y lÃ  chiáº¿c Ã´ tÃ´", emoji: "ğŸš—" },
            { english: "This is a cat.", vietnamese: "ÄÃ¢y lÃ  con mÃ¨o", emoji: "ğŸ±" },
            { english: "This is a cow.", vietnamese: "ÄÃ¢y lÃ  con bÃ²", emoji: "ğŸ„" },
            { english: "This is a dog.", vietnamese: "ÄÃ¢y lÃ  con chÃ³", emoji: "ğŸ¶" },
            { english: "This is a drum.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i trá»‘ng", emoji: "ğŸ¥" },
            { english: "This is a duck.", vietnamese: "ÄÃ¢y lÃ  con vá»‹t", emoji: "ğŸ¦¢" },
            { english: "This is an ear.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i tai", emoji: "ğŸ‘‚" },
            { english: "This is an egg.", vietnamese: "ÄÃ¢y lÃ  quáº£ trá»©ng", emoji: "ğŸ¥š" },
            { english: "This is an elephant.", vietnamese: "ÄÃ¢y lÃ  con voi", emoji: "ğŸ˜" },
            { english: "This is a fan.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i quáº¡t", emoji: "ğŸª­" },
            { english: "This is a fish.", vietnamese: "ÄÃ¢y lÃ  con cÃ¡", emoji: "ğŸ " },
            { english: "This is a frog.", vietnamese: "ÄÃ¢y lÃ  con áº¿ch", emoji: "ğŸ¸" },
            { english: "This is a gift.", vietnamese: "ÄÃ¢y lÃ  mÃ³n quÃ ", emoji: "ğŸ" },
            { english: "This is a goat.", vietnamese: "ÄÃ¢y lÃ  con dÃª", emoji: "ğŸ" },
            { english: "This is a bunch of grapes.", vietnamese: "ÄÃ¢y lÃ  chÃ¹m nho", emoji: "ğŸ‡" },
            { english: "This is a hat.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i mÅ©", emoji: "ğŸ§¢" },
            { english: "This is a horse.", vietnamese: "ÄÃ¢y lÃ  con ngá»±a", emoji: "ğŸ" },
            { english: "This is a house.", vietnamese: "ÄÃ¢y lÃ  ngÃ´i nhÃ ", emoji: "ğŸ " },
            { english: "This is an ice cream.", vietnamese: "ÄÃ¢y lÃ  cÃ¢y kem", emoji: "ğŸ¨" },
            { english: "This is an insect.", vietnamese: "ÄÃ¢y lÃ  con cÃ´n trÃ¹ng", emoji: "ğŸ" },
            { english: "This is a jelly.", vietnamese: "ÄÃ¢y lÃ  mÃ³n tháº¡ch", emoji: "ğŸ®" },
            { english: "This is a juice.", vietnamese: "ÄÃ¢y lÃ  ly nÆ°á»›c Ã©p", emoji: "ğŸ§ƒ" },
            { english: "This is a kangaroo.", vietnamese: "ÄÃ¢y lÃ  con chuá»™t tÃºi", emoji: "ğŸ¦˜" },
            { english: "This is a key.", vietnamese: "ÄÃ¢y lÃ  chÃ¬a khÃ³a", emoji: "ğŸ”‘" },
            { english: "This is a kite.", vietnamese: "ÄÃ¢y lÃ  con diá»u", emoji: "ğŸª" },
            { english: "This is a lamp.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i Ä‘Ã¨n", emoji: "ğŸª”" },
            { english: "This is a leaf.", vietnamese: "ÄÃ¢y lÃ  chiáº¿c lÃ¡", emoji: "ğŸƒ" },
            { english: "This is a lion.", vietnamese: "ÄÃ¢y lÃ  con sÆ° tá»­", emoji: "ğŸ¦" },
            { english: "This is some milk.", vietnamese: "ÄÃ¢y lÃ  Ã­t sá»¯a", emoji: "ğŸ¥›" },
            { english: "This is the moon.", vietnamese: "ÄÃ¢y lÃ  máº·t trÄƒng", emoji: "ğŸŒ™" },
            { english: "This is a monkey.", vietnamese: "ÄÃ¢y lÃ  con khá»‰", emoji: "ğŸ’" },
            { english: "This is a net.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i lÆ°á»›i", emoji: "ğŸ•¸ï¸" },
            { english: "This is a nose.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i mÅ©i", emoji: "ğŸ‘ƒ" },
            { english: "This is an octopus.", vietnamese: "ÄÃ¢y lÃ  con báº¡ch tuá»™c", emoji: "ğŸ™" },
            { english: "This is an orange.", vietnamese: "ÄÃ¢y lÃ  quáº£ cam", emoji: "ğŸŠ" },
            { english: "This is an owl.", vietnamese: "ÄÃ¢y lÃ  con cÃº", emoji: "ğŸ¦‰" },
            { english: "This is a pen.", vietnamese: "ÄÃ¢y lÃ  cÃ¢y bÃºt", emoji: "ğŸ–‹ï¸" },
            { english: "This is a pig.", vietnamese: "ÄÃ¢y lÃ  con lá»£n", emoji: "ğŸ·" },
            { english: "This is a pizza.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i pizza", emoji: "ğŸ•" },
            { english: "This is a queen.", vietnamese: "ÄÃ¢y lÃ  ná»¯ hoÃ ng", emoji: "ğŸ‘‘" },
            { english: "This is a rabbit.", vietnamese: "ÄÃ¢y lÃ  con thá»", emoji: "ğŸ°" },
            { english: "This is the rain.", vietnamese: "ÄÃ¢y lÃ  cÆ¡n mÆ°a", emoji: "â˜”" },
            { english: "This is a robot.", vietnamese: "ÄÃ¢y lÃ  con robot", emoji: "ğŸ¤–" },
            { english: "This is a sock.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i táº¥t", emoji: "ğŸ§¦" },
            { english: "This is a star.", vietnamese: "ÄÃ¢y lÃ  ngÃ´i sao", emoji: "â­" },
            { english: "This is the sun.", vietnamese: "ÄÃ¢y lÃ  máº·t trá»i", emoji: "â˜€ï¸" },
            { english: "This is a table.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i bÃ n", emoji: "ğŸª‘" },
            { english: "This is a tiger.", vietnamese: "ÄÃ¢y lÃ  con há»•", emoji: "ğŸ…" },
            { english: "This is a turtle.", vietnamese: "ÄÃ¢y lÃ  con rÃ¹a", emoji: "ğŸ¢" },
            { english: "This is an umbrella.", vietnamese: "ÄÃ¢y lÃ  cÃ¡i Ã´", emoji: "â˜‚ï¸" },
            { english: "This is a unicorn.", vietnamese: "ÄÃ¢y lÃ  con ká»³ lÃ¢n", emoji: "ğŸ¦„" },
            { english: "This is a uniform.", vietnamese: "ÄÃ¢y lÃ  bá»™ Ä‘á»“ng phá»¥c", emoji: "ğŸ‘•" },
            { english: "This is a van.", vietnamese: "ÄÃ¢y lÃ  chiáº¿c xe táº£i", emoji: "ğŸš" },
            { english: "This is a vest.", vietnamese: "ÄÃ¢y lÃ  Ã¡o vest", emoji: "ğŸ¦º" },
            { english: "This is a violin.", vietnamese: "ÄÃ¢y lÃ  Ä‘Ã n violin", emoji: "ğŸ»" },
            { english: "This is a watch.", vietnamese: "ÄÃ¢y lÃ  Ä‘á»“ng há»“", emoji: "âŒš" },
            { english: "This is a whale.", vietnamese: "ÄÃ¢y lÃ  con cÃ¡ voi", emoji: "ğŸ³" },
            { english: "This is a window.", vietnamese: "ÄÃ¢y lÃ  cá»­a sá»•", emoji: "ğŸªŸ" },
            { english: "This is a xylophone.", vietnamese: "ÄÃ¢y lÃ  Ä‘Ã n xylophone", emoji: "ğŸ¹" },
            { english: "This is something yellow.", vietnamese: "ÄÃ¢y lÃ  thá»© mÃ u vÃ ng", emoji: "ğŸ’›" },
            { english: "This is a yo-yo.", vietnamese: "ÄÃ¢y lÃ  con yo-yo", emoji: "ğŸª€" },
            { english: "This is a zebra.", vietnamese: "ÄÃ¢y lÃ  con ngá»±a váº±n", emoji: "ğŸ¦“" },
            { english: "This is a zip.", vietnamese: "ÄÃ¢y lÃ  khÃ³a kÃ©o", emoji: "ğŸ¤" },
            { english: "This is a zoo.", vietnamese: "ÄÃ¢y lÃ  sá»Ÿ thÃº", emoji: "ğŸ¦’" }
        ];

        let currentSentenceIndex = 0;
        let completedCount = 0;
        let isPlaying = false;
        let autoPlayInterval;
        let wrongAttempts = 0;
        const TOTAL_SENTENCES = sentences.length;

        function emojiExplosion() {
            const gameContainer = document.getElementById('game-container');
            const input = document.getElementById('userInput');
            if(!gameContainer || !input) return;

            const currentEmoji = sentences[currentSentenceIndex].emoji;
            const inputRect = input.getBoundingClientRect();
            const containerRect = gameContainer.getBoundingClientRect();
            const startX = inputRect.left - containerRect.left + inputRect.width / 2;
            const startY = inputRect.top - containerRect.top + inputRect.height / 2;

            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'emoji-particle';
                particle.textContent = currentEmoji;
                
                const angle = Math.random() * 2 * Math.PI;
                const distance = Math.random() * 150 + 80;
                const tx = Math.cos(angle) * distance;
                const ty = Math.sin(angle) * distance;

                particle.style.left = `${startX}px`;
                particle.style.top = `${startY}px`;
                particle.style.setProperty('--tx', `${tx}px`);
                particle.style.setProperty('--ty', `${ty}px`);
                
                gameContainer.appendChild(particle);
                setTimeout(() => particle.remove(), 1200);
            }
        }

        function playSentence() {
            if (!isPlaying && sentences[currentSentenceIndex]) {
                isPlaying = true;
                const utterance = new SpeechSynthesisUtterance(sentences[currentSentenceIndex].english);
                utterance.lang = 'en-US';
                utterance.rate = 0.9;
                utterance.onend = () => { isPlaying = false; };
                speechSynthesis.speak(utterance);
            }
        }
        
        function startAutoPlay() {
            if (autoPlayInterval) clearInterval(autoPlayInterval);
            autoPlayInterval = setInterval(() => { if (!isPlaying) playSentence(); }, 5000);
        }

        function stopAutoPlay() {
            if (autoPlayInterval) clearInterval(autoPlayInterval);
        }

        function checkAnswer() {
            const userInput = document.getElementById('userInput').value.trim();
            const result = document.getElementById('result');
            const currentSentence = sentences[currentSentenceIndex].english;
            const normalize = (str) => str.toLowerCase().replace(/[.,!?']/g, '');

            if (normalize(userInput) === normalize(currentSentence)) {
                stopAutoPlay();
                result.textContent = "Correct!";
                result.className = 'correct';
                emojiExplosion();
                wrongAttempts = 0;
                
                setTimeout(() => {
                    currentSentenceIndex++;
                    completedCount++;
                    if (currentSentenceIndex >= TOTAL_SENTENCES) {
                        document.getElementById('game-container').innerHTML = `<h1>Congratulations! ğŸ¥³</h1><p>You've learned all ${completedCount} words!</p><button onclick="resetGame()">Play Again</button>`;
                    } else {
                         updateGameScreen();
                         playSentence();
                         startAutoPlay();
                    }
                }, 2000);
            } else {
                wrongAttempts++;
                result.textContent = `Incorrect, try again! (${3 - wrongAttempts} attempts left)`;
                result.className = 'incorrect';
                if (wrongAttempts >= 3) {
                    stopAutoPlay();
                    wrongAttempts = 0;
                    result.textContent = "Moving to the next word...";
                    setTimeout(() => {
                        currentSentenceIndex++;
                        if (currentSentenceIndex >= TOTAL_SENTENCES) {
                            document.getElementById('game-container').innerHTML = `<h1>Game Over!</h1><p>You completed ${completedCount} out of ${TOTAL_SENTENCES} words.</p><button onclick="resetGame()">Play Again</button>`;
                        } else {
                            updateGameScreen();
                            playSentence();
                            startAutoPlay();
                        }
                    }, 2000);
                }
            }
        }
        
        function updateGameScreen() {
             if (document.getElementById('userInput')) {
                document.getElementById('userInput').value = '';
                document.getElementById('hint').textContent = '';
                document.getElementById('result').textContent = '';
                document.getElementById('completion').textContent = `Completed: ${completedCount}/${TOTAL_SENTENCES}`;
             }
        }

        function showHint() {
            const hintData = sentences[currentSentenceIndex];
            document.getElementById('hint').innerHTML = `Hint: ${hintData.english}<br>(${hintData.vietnamese} ${hintData.emoji})`;
        }

        function startGame() {
            wrongAttempts = 0;
            document.getElementById('game-container').innerHTML = `
                <h1>Emoji Spelling Adventure</h1>
                <p>Listen and type what you hear!<span class="instruction-vi">HÃ£y láº¯ng nghe vÃ  gÃµ láº¡i cÃ¢u báº¡n nghe Ä‘Æ°á»£c.</span></p>
                <input type="text" id="userInput" placeholder="Type the sentence here...">
                <div class="button-group">
                    <button onclick="playSentence()">&#9658; Play Sound</button>
                    <button onclick="checkAnswer()">Check</button>
                    <button onclick="showHint()">Hint</button>
                    <button onclick="resetGame()">Reset Game</button>
                </div>
                <p id="completion">Completed: ${completedCount}/${TOTAL_SENTENCES}</p>
                <p id="hint"></p>
                <p id="result"></p>
            `;
            document.getElementById('userInput').addEventListener('keypress', handleKeyPress);
            playSentence();
            startAutoPlay();
        }

        function resetGame() {
            stopAutoPlay();
            currentSentenceIndex = 0;
            completedCount = 0;
            wrongAttempts = 0;
            speechSynthesis.cancel();
            isPlaying = false;
            
            document.getElementById('game-container').innerHTML = `
                <h1>Emoji Spelling Adventure</h1>
                <p>Click Start to begin the game!<span class="instruction-vi">Nháº¥n Báº¯t Ä‘áº§u Ä‘á»ƒ chÆ¡i!</span></p>
                <button onclick="startGame()">Start</button>
            `;
        }
        
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                checkAnswer();
            }
        }
    </script>
</body>
</html>
